<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Define or edit a treatment element."><title>[Simulx] Define treatment element — defineTreatmentElement • lixoftConnectors</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="[Simulx] Define treatment element — defineTreatmentElement"><meta property="og:description" content="Define or edit a treatment element."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">lixoftConnectors</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2023.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>[Simulx] Define treatment element</h1>
      
      <div class="d-none name"><code>defineTreatmentElement.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Define or edit a treatment element.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">defineTreatmentElement</span><span class="op">(</span><span class="va">name</span>, <span class="va">element</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>name</dt>
<dd><p>(<em>string</em>) Element name.</p></dd>


<dt>element</dt>
<dd><p>(<em>list</em>) List with the treatment settings:</p><table class="table table"><tr><td><code>data</code> (mandatory)</td><td>(data frame or external file, csv or txt)</td></tr><tr><td></td><td>Column headers:</td></tr><tr><td></td><td><ul><li><p>[only data frame] for a regular treatment common to all ids:<code>occ</code> (optional, if common occasion structure, same header as in the occasion element), <code>start</code>, <code>interval</code>, <code>nbDoses</code>, <code>amount</code></p></li>
<li><p>[only data frame] for a manual treatment common to all ids: <code>occ</code> (optional, if common occasion structure, same header as in the occasion element), <code>time</code>, <code>amount</code>, <code>washout</code> (optional, to add a washout just before the dose, otherwise washout = FALSE by default)</p></li>
<li><p>[only external file] for a manual treatment common or specific to each id: <code>id</code> (optional), <code>occ</code> (optional), <code>time</code>, <code>amount</code>, <code>washout</code> (optional)</p></li>
<li><p>[data frame or external] in case of infusion: <code>tInf</code> (duration) OR <code>rate</code> (mutually exclusive).</p></li>
</ul></td></tr><tr><td><code>admID</code> (optional)</td><td>(integer) same as integer in the model as administration type</td></tr><tr><td><code>probaMissDose</code> (optional)</td><td>(double) probability to miss a dose (number in [0 1])</td></tr><tr><td><code>repeats</code> (optional)</td><td>(vector) to repeat the specified treatment after a specific duration.</td></tr><tr><td></td><td>Elements:</td></tr><tr><td></td><td><dl><dt><code>cycleDuration</code></dt>
<dd><p>duration after which the treatment will be repeated (can be longer than the treatment duration)</p></dd>

  <dt><code>NumberOfRepetitions</code></dt>
<dd><p>number of times the treatment will be repeated</p></dd>


</dl></td></tr><tr><td><code>scale</code> (optional)</td><td>(list) to scale the dose amount by a covariate. The scaled amount will be administered instead of amount.</td></tr><tr><td></td><td><dl><dt><code>covariate</code></dt>
<dd><p>(string) covariate to use for scaling (same name as in the [COVARIATE] block of the model)</p></dd>

  <dt><code>intercept</code></dt>
<dd><p>(double, required for continuous covariate): intercept to use in the scaling formula: scaledAmount = amount*cov + intercept</p></dd>

  <dt><code>modalities</code></dt>
<dd><p>(list, required for categorical covariate): list of lists with, for each modality, the name of the modality (eg "male"), the factor, and the intercept to use in the scaling formula: scaledAmount = [cov = modality]*factor*amt + intercept (no scaling if factor =1 and intercept = 0)</p></dd>

  <dt><code>scaleDuration</code></dt>
<dd><p>(optional, boolean) if TRUE (default), infusion duration will be scaled, otherwise it will be rate</p></dd>


</dl></td></tr></table></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Treatment elements are defined and used for simulation <a href="https://simulx.lixoft.com/definition/treatments/" class="external-link">as in Simulx GUI</a>. As for other elements, the treatment elements can be defined or created at import, and they are saved with the Simulx project if calling <a href="saveProject.html">saveProject</a>. Once an output element is defined, it needs to be added to a simulation group with <a href="setGroupElement.html">setGroupElement</a> to be used in simulation. Several treatment elements can be added to the same simulation group and they will be both administered to every individual in the group.</p>
<p>To define a treatment element, in addition to the element name, you need to provide a list with at list one field "data" containing the dose information. The field data can be specified with a data frame or an external file (csv or txt).</p>
<p>To define a regular treatment, common to all individuals, you can use a data frame, with column headers start, interval, nbDoses and amount. You can include an optional column tInf or rate to define an infusion. If the project has a common occasion structure (i.e. same occasions for all individuals), this data frame can contain a column occasion to define the regular treatment occasion-wise. The occasion headers must correspond to the occasion names defined in the occasion element.</p>
<p>To define a treatment by giving a specific list of times and amounts, both data frames and external files (txt or csv) can be used, with a column time. They can contain columns id and occasions (optional). The occasion headers must correspond to the occasion names defined in the occasion element.</p>
<p>Data frames can be used only to define output elements of type 'common', i.e the same for all individuals (potentially occasion-wise).  If you want to define subject-specific treatment elements, you have to use an external file with an "id" column.</p>
<p>An external file can be used in all cases (common or subject-specific). It can contain a column id (optional) in addition to occasions (optional), and should contain one column time (mandatory) and one column amount (mandatory). When id and occasion columns are present, then they must be the first columns. When the id column is not present, the covariate is considered common.</p>
    </div>
    <div class="section level2">
    <h2 id="note">Note<a class="anchor" aria-label="anchor" href="#note"></a></h2>
    <p>To define a regular schedule, it is advised to use a regular treatment without repeats, rather than a manual treatment with repeats. Repeats are useful to create more complex schedules in addition to a manual or regular definition, such as dosing regimen 3 weeks ON, 1 week OFF.</p>
<p>To see the impact of a treatment until the end of a dosing regimen, you should set an output element that spans the duration of the treatment to the same simulation group.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="getTreatmentElements.html">getTreatmentElements</a></code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"name"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data <span class="op">=</span> <span class="st">"file/path"</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"name"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>probaMissDose<span class="op">=</span><span class="fl">0</span>, admID<span class="op">=</span><span class="fl">1</span>, repeats<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>cycleDuration <span class="op">=</span> <span class="fl">1</span>, NumberOfRepetitions<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>time<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, amount<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span>, tInf<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span>, washout<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"name"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>probaMissDose<span class="op">=</span><span class="fl">0</span>, admID<span class="op">=</span><span class="fl">1</span>, repeats<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>cycleDuration <span class="op">=</span> <span class="fl">1</span>, NumberOfRepetitions<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>time<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">10</span>,<span class="fl">10</span>,<span class="fl">10</span><span class="op">)</span>, amount<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">40</span><span class="op">)</span>, occ1<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">2</span><span class="op">)</span>, occ2<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"name"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>probaMissDose<span class="op">=</span><span class="fl">0</span>, admID<span class="op">=</span><span class="fl">1</span>, repeats<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>cycleDuration <span class="op">=</span> <span class="fl">1</span>, NumberOfRepetitions<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">1</span>, interval<span class="op">=</span><span class="fl">2</span>, nbDoses<span class="op">=</span><span class="fl">10</span>, amount<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"name"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>admID<span class="op">=</span><span class="fl">1</span>, scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>covariate<span class="op">=</span><span class="st">"age"</span>, intercept<span class="op">=</span><span class="fl">12</span><span class="op">)</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">1</span>, interval<span class="op">=</span><span class="fl">2</span>, nbDoses<span class="op">=</span><span class="fl">10</span>, amount<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>  <span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"name"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>admID<span class="op">=</span><span class="fl">1</span>, scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>covariate<span class="op">=</span><span class="st">"sex"</span>, modalities<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"0"</span>, factor<span class="op">=</span><span class="fl">1</span>, intercept<span class="op">=</span><span class="fl">10</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"1"</span>, factor<span class="op">=</span><span class="fl">1.5</span>, intercept<span class="op">=</span><span class="fl">10</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">1</span>, interval<span class="op">=</span><span class="fl">2</span>, nbDoses<span class="op">=</span><span class="fl">10</span>, amount<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span> </span>
<span></span>
<span><span class="co">##### Working example with treatment combinations #####</span></span>
<span></span>
<span><span class="co"># In this demo, the first group receives only the chemotherapy, while the second group receives both the chemotherapy and the anti-angiogenic therapy. </span></span>
<span><span class="co"># Note that the chemotherapy treatment uses adm=1 to be applied to compartment 1 via the macro iv(adm=1, cmt=1) in the model representing the concentration of the chemo drug. </span></span>
<span><span class="co"># The anti-angiogenic treatment is defined with adm=2 which is applied via the macro iv(adm=2, cmt=2) to compartment 2 representing the concentration of anti-angiogenic drug.</span></span>
<span></span>
<span><span class="fu"><a href="initializeLixoftConnectors.html">initializeLixoftConnectors</a></span><span class="op">(</span><span class="st">"simulx"</span><span class="op">)</span></span>
<span><span class="fu"><a href="loadProject.html">loadProject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="getDemoPath.html">getDemoPath</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/3.definition/3.1.treatments/treatment_combinations.smlx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># to see how the structural model is defined:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/file.show.html" class="external-link">file.show</a></span><span class="op">(</span><span class="fu"><a href="getStructuralModel.html">getStructuralModel</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"Chemotherapy"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">10</span>, interval<span class="op">=</span><span class="fl">14</span>, nbDoses<span class="op">=</span><span class="fl">10</span>, amount<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"AntiAngionenic_treatment"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>admID <span class="op">=</span> <span class="fl">2</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">10</span>, interval<span class="op">=</span><span class="fl">7</span>, nbDoses<span class="op">=</span><span class="fl">20</span>, amount<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup1"</span>,<span class="st">"Chemotherapy"</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup2"</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Chemotherapy"</span>,<span class="st">"AntiAngionenic_treatment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># use ggplot or export to Monolix/PKanalix to plot trajectories </span></span>
<span><span class="fu"><a href="exportProject.html">exportProject</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>targetSoftware <span class="op">=</span> <span class="st">"monolix"</span><span class="op">)</span>,force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span><span class="fu"><a href="plotObservedData.html">plotObservedData</a></span><span class="op">(</span> settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dots <span class="op">=</span> <span class="cn">FALSE</span>,  ylab <span class="op">=</span> <span class="st">"Target Occupancy"</span>, legend <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, stratify <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>colorGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span><span class="op">)</span>, preferences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lineWidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span></span>
<span><span class="co">##### Working example with a treatment scaled by weight and based on genotype #####</span></span>
<span></span>
<span><span class="co">#  In this demo, a weight-based dose is defined by indicating the dose per unit weight in the amount box (14 nmol/kg) and using the "Scale amount by a covariate" option with "Weight" selected as covariate. </span></span>
<span><span class="co"># The "intercept" could be used to define a offset common to all weights (e.g 14nmol/kg + 10nmol). </span></span>
<span><span class="co"># When an infusion duration or rate has been defined, the user can choose if the infusion duration or the infusion rate is scaled by the covariate. </span></span>
<span><span class="co"># For categorical covariates, such as the genotype, a scaling factor and an intercept can be defined for each category. </span></span>
<span><span class="co"># In this demo, the scaling for Homozygous is 1 meaning that they receive the dose defined in the amount box. </span></span>
<span><span class="co"># For heterozygous, the scaling is 0.8, meaning that they receive 0.8 times the amount in the amount box. </span></span>
<span></span>
<span><span class="fu"><a href="initializeLixoftConnectors.html">initializeLixoftConnectors</a></span><span class="op">(</span><span class="st">"simulx"</span><span class="op">)</span></span>
<span><span class="fu"><a href="loadProject.html">loadProject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="getDemoPath.html">getDemoPath</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/3.definition/3.1.treatments/treatment_weight_and_genotype_based.smlx"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"14nmolPerKg"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">0</span>, interval<span class="op">=</span><span class="fl">21</span>, nbDoses<span class="op">=</span><span class="fl">5</span>, amount<span class="op">=</span><span class="fl">14</span>, tInf <span class="op">=</span> <span class="fl">0.208</span><span class="op">)</span>, scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>covariate<span class="op">=</span><span class="st">"Weight"</span>, intercept <span class="op">=</span> <span class="fl">0</span>, scaleDuration <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"1000nmol"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">0</span>, interval<span class="op">=</span><span class="fl">21</span>, nbDoses<span class="op">=</span><span class="fl">5</span>, amount<span class="op">=</span><span class="fl">1000</span>, tInf <span class="op">=</span> <span class="fl">0.208</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"1000nmolHomo_800nmolHetero"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">0</span>, interval<span class="op">=</span><span class="fl">21</span>, nbDoses<span class="op">=</span><span class="fl">5</span>, amount<span class="op">=</span><span class="fl">1000</span>, tInf <span class="op">=</span> <span class="fl">0.208</span><span class="op">)</span>, scale<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>covariate<span class="op">=</span><span class="st">"Genotype"</span>, modalities<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Homozygous"</span>, factor<span class="op">=</span><span class="fl">1</span>, intercept<span class="op">=</span><span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name<span class="op">=</span><span class="st">"Heterozygous"</span>, factor<span class="op">=</span><span class="fl">0.8</span>, intercept<span class="op">=</span><span class="fl">0</span><span class="op">)</span><span class="op">)</span>, scaleDuration <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"Weight_based"</span>,<span class="st">"14nmolPerKg"</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupSize.html">setGroupSize</a></span><span class="op">(</span><span class="st">"Weight_based"</span>,<span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"Flat_dose"</span>,<span class="st">"1000nmol"</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupSize.html">setGroupSize</a></span><span class="op">(</span><span class="st">"Flat_dose"</span>,<span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"Genotype_based"</span>,<span class="st">"1000nmolHomo_800nmolHetero"</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupSize.html">setGroupSize</a></span><span class="op">(</span><span class="st">"Genotype_based"</span>,<span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># use ggplot or export to Monolix/PKanalix to plot trajectories </span></span>
<span><span class="fu"><a href="exportProject.html">exportProject</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>targetSoftware <span class="op">=</span> <span class="st">"monolix"</span><span class="op">)</span>,force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="plotObservedData.html">plotObservedData</a></span><span class="op">(</span>obsName <span class="op">=</span> <span class="st">"yTO"</span>, settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dots <span class="op">=</span> <span class="cn">FALSE</span>,  ylab <span class="op">=</span> <span class="st">"Target Occupancy"</span><span class="op">)</span>, stratify <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>splitGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span><span class="op">)</span>, preferences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lineWidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">##### Working example with a probability to miss a dose #####</span></span>
<span></span>
<span><span class="co"># In this demo, the second treatment is defined with a probability to miss a dose of 0.1, meaning that on average 10% of the doses will not be taken. The missed doses are random.</span></span>
<span></span>
<span><span class="fu"><a href="initializeLixoftConnectors.html">initializeLixoftConnectors</a></span><span class="op">(</span><span class="st">"simulx"</span><span class="op">)</span></span>
<span><span class="fu"><a href="loadProject.html">loadProject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="getDemoPath.html">getDemoPath</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/3.definition/3.1.treatments/treatment_non_adherence.smlx"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"OncePerDay_full_compliance"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">0</span>, interval<span class="op">=</span><span class="fl">1</span>, nbDoses<span class="op">=</span><span class="fl">112</span>, amount<span class="op">=</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"OncePerDay_partial_compliance"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">0</span>, interval<span class="op">=</span><span class="fl">1</span>, nbDoses<span class="op">=</span><span class="fl">112</span>, amount<span class="op">=</span><span class="fl">100</span><span class="op">)</span>,probaMissDose <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup1"</span>,<span class="st">"OncePerDay_full_compliance"</span><span class="op">)</span></span>
<span><span class="fu"><a href="renameGroup.html">renameGroup</a></span><span class="op">(</span><span class="st">"simulationGroup1"</span>,<span class="st">"FullCompliance"</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup2"</span>,<span class="st">"OncePerDay_partial_compliance"</span><span class="op">)</span></span>
<span><span class="fu"><a href="renameGroup.html">renameGroup</a></span><span class="op">(</span><span class="st">"simulationGroup2"</span>,<span class="st">"NonAdherence"</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupSize.html">setGroupSize</a></span><span class="op">(</span><span class="st">"FullCompliance"</span>,<span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupSize.html">setGroupSize</a></span><span class="op">(</span><span class="st">"NonAdherence"</span>,<span class="fl">20</span><span class="op">)</span></span>
<span><span class="fu"><a href="runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># use ggplot or export to Monolix/PKanalix to plot trajectories </span></span>
<span><span class="fu"><a href="exportProject.html">exportProject</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>targetSoftware <span class="op">=</span> <span class="st">"monolix"</span><span class="op">)</span>,force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="plotObservedData.html">plotObservedData</a></span><span class="op">(</span> settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dots <span class="op">=</span> <span class="cn">FALSE</span>,  ylab <span class="op">=</span> <span class="st">"Target Occupancy"</span><span class="op">)</span>, stratify <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>splitGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span><span class="op">)</span>, preferences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lineWidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co">##### Working example with an external file #####</span></span>
<span></span>
<span><span class="co"># Demo: use an external file to define a dose by age group: 1-2 years 12.5 mg, 3-6 years 18.75 mg and 7-15 years 25 mg. </span></span>
<span><span class="co"># The age also appears as covariate in the model and the covariate element is defined via an external file. </span></span>
<span><span class="co"># To make sure the covariates are sampled from the covariate external file and the doses sampled from the treatment external file are consistent (i.e correspond to the same id and thus the same age), the option "shared id" is selected between covariate and treatment elements.</span></span>
<span></span>
<span><span class="fu"><a href="initializeLixoftConnectors.html">initializeLixoftConnectors</a></span><span class="op">(</span><span class="st">"simulx"</span><span class="op">)</span></span>
<span><span class="fu"><a href="loadProject.html">loadProject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="getDemoPath.html">getDemoPath</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/3.definition/3.1.treatments/treatment_external_byAgeGroup.smlx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">tableAge</span> <span class="op">=</span> <span class="fu"><a href="getCovariateElements.html">getCovariateElements</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">External_AGE_values</span><span class="op">$</span><span class="va">data</span></span>
<span><span class="va">AmtByAgeGroups</span> <span class="op">=</span> <span class="op">(</span><span class="va">tableAge</span><span class="op">$</span><span class="va">AGE</span> <span class="op">&lt;</span> <span class="fl">3</span><span class="op">)</span><span class="op">*</span><span class="fl">12.5</span> <span class="op">+</span> <span class="op">(</span><span class="op">(</span><span class="va">tableAge</span><span class="op">$</span><span class="va">AGE</span> <span class="op">&gt;=</span><span class="fl">3</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">tableAge</span><span class="op">$</span><span class="va">AGE</span> <span class="op">&lt;</span> <span class="fl">7</span><span class="op">)</span><span class="op">)</span><span class="op">*</span><span class="fl">18.75</span> <span class="op">+</span> <span class="op">(</span><span class="va">tableAge</span><span class="op">$</span><span class="va">AGE</span> <span class="op">&gt;=</span> <span class="fl">7</span><span class="op">)</span><span class="op">*</span><span class="fl">25</span></span>
<span><span class="va">Nid</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">AmtByAgeGroups</span><span class="op">)</span></span>
<span><span class="va">dataAmtByAgeGroups</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="va">tableAge</span><span class="op">$</span><span class="va">ID</span>, time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">0</span>,<span class="va">Nid</span><span class="op">)</span>, amount <span class="op">=</span> <span class="va">AmtByAgeGroups</span><span class="op">)</span></span>
<span><span class="va">file_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="st">"trt"</span>, fileext <span class="op">=</span> <span class="st">".csv"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">dataAmtByAgeGroups</span>, <span class="va">file_name</span>, row.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"doseByAgeGroup"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">file_name</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup1"</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"doseByAgeGroup"</span>,<span class="st">"External_AGE_values"</span>,<span class="st">"regularCc"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="setSharedIds.html">setSharedIds</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"covariate"</span>, <span class="st">"treatment"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># use ggplot or export to Monolix/PKanalix to plot trajectories </span></span>
<span><span class="fu"><a href="exportProject.html">exportProject</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>targetSoftware <span class="op">=</span> <span class="st">"monolix"</span><span class="op">)</span>,force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="plotObservedData.html">plotObservedData</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dots <span class="op">=</span> <span class="cn">FALSE</span>, ylab <span class="op">=</span> <span class="st">"Cc"</span>,legend <span class="op">=</span> <span class="cn">TRUE</span>, ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">13</span><span class="op">)</span><span class="op">)</span>, stratify <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>splitGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"AGE"</span>, breaks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">7</span><span class="op">)</span><span class="op">)</span>, colorGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"ID"</span><span class="op">)</span><span class="op">)</span>, preferences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lineWidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">##### Working example with washout #####</span></span>
<span></span>
<span><span class="co"># In this demo, two different formulations are given. </span></span>
<span><span class="co"># The reference formulation is given at time zero. </span></span>
<span><span class="co"># The test formulation is given after a long washout period. </span></span>
<span><span class="co"># In order not to simulate this washout period, the test dose is defined at time 48 and a washout is applied just before the test dose to reset the model to its initial state. </span></span>
<span></span>
<span><span class="fu"><a href="initializeLixoftConnectors.html">initializeLixoftConnectors</a></span><span class="op">(</span><span class="st">"simulx"</span><span class="op">)</span></span>
<span><span class="fu"><a href="loadProject.html">loadProject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="getDemoPath.html">getDemoPath</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/3.definition/3.1.treatments/treatment_washout.smlx"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"ReferenceFormulation_atTime0"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>time<span class="op">=</span><span class="fl">0</span>, amount<span class="op">=</span><span class="fl">600</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"TestFormulation_atTime48"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>admID <span class="op">=</span> <span class="fl">2</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>time<span class="op">=</span><span class="fl">0</span>, amount<span class="op">=</span><span class="fl">600</span>, washout <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>    </span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup1"</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ReferenceFormulation_atTime0"</span>,<span class="st">"ReferenceFormulation_atTime0"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co">##### Working example with a regular treatment and repeats #####</span></span>
<span></span>
<span><span class="co"># The "repeat" option allows to repeat a base pattern several times with a defined periodicity. </span></span>
<span><span class="co"># In this demo, the first treatment is defined as one dose per day during 112 days. </span></span>
<span><span class="co"># The second treatment is defined as one dose per day during 14 days and this is repeated every 28 days leading to a 2 weeks on / 2 weeks off pattern.</span></span>
<span></span>
<span><span class="fu"><a href="initializeLixoftConnectors.html">initializeLixoftConnectors</a></span><span class="op">(</span><span class="st">"simulx"</span><span class="op">)</span></span>
<span><span class="fu"><a href="loadProject.html">loadProject</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="getDemoPath.html">getDemoPath</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/3.definition/3.1.treatments/treatment_regular_cycles.smlx"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"OncePerDay_4weeksOn"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">0</span>, interval<span class="op">=</span><span class="fl">1</span>, nbDoses<span class="op">=</span><span class="fl">112</span>, amount<span class="op">=</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">defineTreatmentElement</span><span class="op">(</span>name <span class="op">=</span> <span class="st">"OncePerDay_2weeksOn2weeksOff"</span>, element <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>repeats<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>cycleDuration <span class="op">=</span> <span class="fl">28</span>, NumberOfRepetitions<span class="op">=</span><span class="fl">4</span><span class="op">)</span>, data<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>start<span class="op">=</span><span class="fl">0</span>, interval<span class="op">=</span><span class="fl">1</span>, nbDoses<span class="op">=</span><span class="fl">14</span>, amount<span class="op">=</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup1"</span>,<span class="st">"OncePerDay_4weeksOn"</span><span class="op">)</span></span>
<span><span class="fu"><a href="renameGroup.html">renameGroup</a></span><span class="op">(</span><span class="st">"simulationGroup1"</span>,<span class="st">"4weeksOn"</span><span class="op">)</span></span>
<span><span class="fu"><a href="setGroupElement.html">setGroupElement</a></span><span class="op">(</span><span class="st">"simulationGroup2"</span>,<span class="st">"OncePerDay_2weeksOn2weeksOff"</span><span class="op">)</span></span>
<span><span class="fu"><a href="renameGroup.html">renameGroup</a></span><span class="op">(</span><span class="st">"simulationGroup2"</span>,<span class="st">"2weeksOn2weeksOff"</span><span class="op">)</span></span>
<span><span class="fu"><a href="runSimulation.html">runSimulation</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co"># use ggplot or export to Monolix/PKanalix to plot trajectories </span></span>
<span><span class="fu"><a href="exportProject.html">exportProject</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>targetSoftware <span class="op">=</span> <span class="st">"monolix"</span><span class="op">)</span>,force <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="plotObservedData.html">plotObservedData</a></span><span class="op">(</span>settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>dots <span class="op">=</span> <span class="cn">FALSE</span>, ylab <span class="op">=</span> <span class="st">"Cc"</span>,legend <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, stratify <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>colorGroup <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>name <span class="op">=</span> <span class="st">"group"</span><span class="op">)</span><span class="op">)</span>, preferences <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>obs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>lineWidth <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span></code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by LIXOFT.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

